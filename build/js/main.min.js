!function(){var e=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;window.requestAnimationFrame=e}();var canvas=document.getElementById("canvas"),ctx=canvas.getContext("2d");canvas.height=document.body.offsetHeight,canvas.width=175;var parts=[],minSpawnTime=40,lastTime=(new Date).getTime(),maxLifeTime=Math.min(5e3,canvas.height/90*1e3),emitterX=canvas.width/2,emitterY=canvas.height-10,smokeImage=new Image;function spawn(){(new Date).getTime()>lastTime+minSpawnTime&&(lastTime=(new Date).getTime(),parts.push(new smoke(emitterX,emitterY)))}function render(){var e=parts.length;for(ctx.clearRect(0,0,canvas.width,canvas.height);e--;)if(parts[e].y<0||parts[e].lifeTime>maxLifeTime)parts.splice(e,1);else{parts[e].update(),ctx.save();var t=-parts[e].size/2,a=-parts[e].size/2;ctx.translate(parts[e].x-t,parts[e].y-a),ctx.rotate(parts[e].angle/180*Math.PI),ctx.globalAlpha=parts[e].alpha,ctx.drawImage(smokeImage,t,a,parts[e].size,parts[e].size),ctx.restore()}spawn(),requestAnimationFrame(render)}function smoke(e,t,a){this.x=e,this.y=t,this.size=1,this.startSize=52,this.endSize=50,this.angle=359*Math.random(),this.startLife=(new Date).getTime(),this.lifeTime=0,this.velY=-1-.5*Math.random(),this.velX=Math.floor(-6*Math.random()+3)/10}function resizeMe(){canvas.height=document.body.offsetHeight}smoke.prototype.update=function(){this.lifeTime=(new Date).getTime()-this.startLife,this.angle+=.2;var e=this.lifeTime/maxLifeTime*100;this.size=this.startSize+(this.endSize-this.startSize)*e*.1,this.alpha=1-.01*e,this.alpha=Math.max(this.alpha,0),this.x+=this.velX,this.y+=this.velY},smokeImage.src=$(".first-canvas img").attr("src"),smokeImage.onload=function(){render()},window.onresize=resizeMe,window.onload=resizeMe;