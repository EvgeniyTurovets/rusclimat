function transitionEnd(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var o in e)if(void 0!==t.style[o])return{end:e[o]};return!1}!function(t){t.fn.smartZoom=function(e){var o=this;function n(t){}n.ZOOM="SmartZoom_ZOOM",n.PAN="SmartZoom_PAN",n.START="START",n.END="END",n.DESTROYED="SmartZoom_DESTROYED";var i={init:function(e){if(!o.data("smartZoomData")){settings=t.extend({top:"0",left:"0",width:"100%",height:"100%",easing:"smartZoomEasing",initCallback:null,maxScale:3,dblClickMaxScale:1.8,mouseEnabled:!0,scrollEnabled:!0,dblClickEnabled:!0,mouseMoveEnabled:!0,moveCursorEnabled:!0,adjustOnResize:!0,touchEnabled:!0,dblTapEnabled:!0,zoomOnSimpleClick:!1,pinchEnabled:!0,touchMoveEnabled:!0,containerBackground:"#FFFFFF",containerClass:""},e);var n=o.attr("style"),i="smartZoomContainer"+(new Date).getTime(),r=t('<div id="'+i+'" class="'+settings.containerClass+'"></div>');o.before(r),o.remove(),(r=t("#"+i)).css({overflow:"hidden"}),""==settings.containerClass&&r.css({"background-color":settings.containerBackground}),r.append(o);var l=new Object;l.lastTouchEndTime=0,l.lastTouchPositionArr=null,l.touchMove=!1,l.touchPinch=!1,o.data("smartZoomData",{settings:settings,containerDiv:r,originalSize:{width:o.width(),height:o.height()},originalPosition:o.offset(),transitionObject:Z(),touch:l,mouseWheelDeltaFactor:.15,currentWheelDelta:0,adjustedPosInfos:null,moveCurrentPosition:null,moveLastPosition:null,mouseMoveForPan:!1,currentActionType:"",initialStyles:n,currentActionStep:""}),w(),1==settings.touchEnabled&&o.bind("touchstart.smartZoom",d),1==settings.mouseEnabled&&(1==settings.mouseMoveEnabled&&o.bind("mousedown.smartZoom",c),1==settings.scrollEnabled&&(r.bind("mousewheel.smartZoom",a),r.bind("mousewheel.smartZoom DOMMouseScroll.smartZoom",s)),1==settings.dblClickEnabled&&0==settings.zoomOnSimpleClick&&r.bind("dblclick.smartZoom",u)),document.ondragstart=function(){return!1},1==settings.adjustOnResize&&t(window).bind("resize.smartZoom",E),null!=settings.initCallback&&settings.initCallback.apply(this,o)}},zoom:function(t,e,i){var a,s,u=o.data("smartZoomData");if(e)a=e.x,s=e.y;else{var c=S(u.containerDiv);a=c.x+c.width/2,s=c.y+c.height/2}g(n.ZOOM);var l=y(!0),m=u.originalSize,d=l.width/m.width+t;d=Math.max(u.adjustedPosInfos.scale,d),d=Math.min(u.settings.maxScale,d);var h=m.width*d,f=m.height*d,p=a-l.x,v=s-l.y,w=h/l.width,Z=b(l.x-(p*w-p),l.y-(v*w-v),h,f);null==i&&(i=700),D(n.ZOOM,n.START,!1),P(o,Z.x,Z.y,h,f,i,function(){u.currentWheelDelta=0,r(),D(n.ZOOM,n.END,!1)})},pan:function(t,e,i){if(null!=t&&null!=e){null==i&&(i=700);var a=o.offset(),s=y(),r=b(a.left+t,a.top+e,s.width,s.height);r.x==a.left&&r.y==a.top||(g(n.PAN),D(n.PAN,n.START,!1),P(o,r.x,r.y,s.width,s.height,i,function(){D(n.PAN,n.END,!1)}))}},destroy:function(){var e=o.data("smartZoomData");if(e){g();var i=e.containerDiv;o.unbind("mousedown.smartZoom"),o.bind("touchstart.smartZoom"),i.unbind("mousewheel.smartZoom"),i.unbind("dblclick.smartZoom"),i.unbind("mousewheel.smartZoom DOMMouseScroll.smartZoom"),t(window).unbind("resize.smartZoom"),t(document).unbind("mousemove.smartZoom"),t(document).unbind("mouseup.smartZoom"),t(document).unbind("touchmove.smartZoom"),t(document).unbind("touchend.smartZoom"),o.css({cursor:"default"}),i.before(o),P(o,e.originalPosition.left,e.originalPosition.top,e.originalSize.width,e.originalSize.height,5),o.removeData("smartZoomData"),i.remove(),o.attr("style",e.initialStyles),o.trigger(n.DESTROYED)}},isPluginActive:function(){return null!=o.data("smartZoomData")}};if(i[e])return i[e].apply(this,Array.prototype.slice.call(arguments,1));function a(t,e){var n=o.data("smartZoomData");n.currentWheelDelta*e<0&&(n.currentWheelDelta=0),n.currentWheelDelta+=e,i.zoom(n.mouseWheelDeltaFactor*n.currentWheelDelta,{x:t.pageX,y:t.pageY})}function s(t){t.preventDefault()}function r(){var t=o.data("smartZoomData");if(1==t.settings.mouseMoveEnabled&&1==t.settings.moveCursorEnabled){var e=y().width/t.originalSize.width;parseInt(100*e)>parseInt(100*t.adjustedPosInfos.scale)?o.css({cursor:"move"}):o.css({cursor:"default"})}}function u(t){v(t.pageX,t.pageY)}function c(e){e.preventDefault(),t(document).on("mousemove.smartZoom",l),t(document).bind("mouseup.smartZoom",m);var n=o.data("smartZoomData");n.moveCurrentPosition=new A(e.pageX,e.pageY),n.moveLastPosition=new A(e.pageX,e.pageY)}function l(t){var e=o.data("smartZoomData");(e.mouseMoveForPan||!e.mouseMoveForPan&&e.moveCurrentPosition.x!=t.pageX&&e.moveCurrentPosition.y!=t.pageY)&&(e.mouseMoveForPan=!0,p(t.pageX,t.pageY,0,!1))}function m(e){var n=o.data("smartZoomData");if(n.mouseMoveForPan)if(n.mouseMoveForPan=!1,n.moveLastPosition.distance(n.moveCurrentPosition)>4){var i=n.moveLastPosition.interpolate(n.moveCurrentPosition,-4);p(i.x,i.y,500,!0)}else p(n.moveLastPosition.x,n.moveLastPosition.y,0,!0);else n.settings.zoomOnSimpleClick&&v(e.pageX,e.pageY);t(document).unbind("mousemove.smartZoom"),t(document).unbind("mouseup.smartZoom")}function d(e){e.preventDefault(),t(document).unbind("touchmove.smartZoom"),t(document).unbind("touchend.smartZoom"),t(document).bind("touchmove.smartZoom",h),t(document).bind("touchend.smartZoom",f);var n,i=e.originalEvent.touches,a=i[0],s=o.data("smartZoomData");s.touch.touchMove=!1,s.touch.touchPinch=!1,s.moveCurrentPosition=new A(a.pageX,a.pageY),s.moveLastPosition=new A(a.pageX,a.pageY),s.touch.lastTouchPositionArr=new Array;for(var r=i.length,u=0;u<r;++u)n=i[u],s.touch.lastTouchPositionArr.push(new A(n.pageX,n.pageY))}function h(t){t.preventDefault();var e=o.data("smartZoomData"),n=t.originalEvent.touches,a=n.length,s=n[0];if(1!=a||e.touch.touchPinch||1!=e.settings.touchMoveEnabled){if(2==a&&!e.touch.touchMove&&1==e.settings.pinchEnabled){e.touch.touchPinch=!0;var r=n[1],u=e.touch.lastTouchPositionArr[0],c=e.touch.lastTouchPositionArr[1],l=new A(s.pageX,s.pageY),m=new A(r.pageX,r.pageY),d=l.distance(m),h=u.distance(c),f=d-h;if(Math.abs(f)<3)return;var v=new A((l.x+m.x)/2,(l.y+m.y)/2),g=y(),b=e.originalSize,w=g.width/b.width,P=d/h,D=g.width*P/b.width;i.zoom(D-w,v,0),e.touch.lastTouchPositionArr[0]=l,e.touch.lastTouchPositionArr[1]=m}}else{if(!e.touch.touchMove){if(e.touch.lastTouchPositionArr[0].distance(new A(s.pageX,s.pageY))<3)return;e.touch.touchMove=!0}p(s.pageX,s.pageY,0,!1)}}function f(e){e.preventDefault(),0==e.originalEvent.touches.length&&(t(document).unbind("touchmove.smartZoom"),t(document).unbind("touchend.smartZoom"));var n=o.data("smartZoomData");if(!n.touch.touchPinch)if(n.touch.touchMove){if(n.moveLastPosition.distance(n.moveCurrentPosition)>2){var i=n.moveLastPosition.interpolate(n.moveCurrentPosition,-4);p(i.x,i.y,500,!0)}}else{if(1==n.settings.dblTapEnabled&&0!=n.touch.lastTouchEndTime&&(new Date).getTime()-n.touch.lastTouchEndTime<400){var a=n.touch.lastTouchPositionArr[0];v(a.x,a.y)}n.touch.lastTouchEndTime=(new Date).getTime()}}function p(t,e,i,a){g(n.PAN);var s=o.data("smartZoomData");s.moveLastPosition.x=s.moveCurrentPosition.x,s.moveLastPosition.y=s.moveCurrentPosition.y;var r=o.offset(),u=y(),c=b(r.left+(t-s.moveCurrentPosition.x),r.top+(e-s.moveCurrentPosition.y),u.width,u.height);D(n.PAN,n.START,!1),P(o,c.x,c.y,u.width,u.height,i,1==a?function(){D(n.PAN,n.END,!1)}:null),s.moveCurrentPosition.x=t,s.moveCurrentPosition.y=e}function v(t,e){var n,a=o.data("smartZoomData"),s=a.originalSize,r=y().width/s.width,u=a.adjustedPosInfos.scale,c=parseFloat(a.settings.dblClickMaxScale);n=r.toFixed(2)>c.toFixed(2)||Math.abs(c-r)>Math.abs(r-u)?c-r:u-r,i.zoom(n,{x:t,y:e})}function g(e){var n=o.data("smartZoomData");if(n.transitionObject){n.transitionObject.cssAnimHandler&&o.off(t.support.transition,n.transitionObject.cssAnimTimer);var i=n.originalSize,a=y(),s=new Object;s[n.transitionObject.transition]="all 0s",n.transitionObject.css3dSupported?s[n.transitionObject.transform]="translate3d("+a.x+"px, "+a.y+"px, 0) scale3d("+a.width/i.width+","+a.height/i.height+", 1)":s[n.transitionObject.transform]="translateX("+a.x+"px) translateY("+a.y+"px) scale("+a.width/i.width+","+a.height/i.height+")",o.css(s)}else o.stop();r(),null!=e&&D(e,"",!0)}function b(t,e,n,i){var a=o.data("smartZoomData"),s=Math.min(a.adjustedPosInfos.top,e);s+=Math.max(0,a.adjustedPosInfos.top+a.adjustedPosInfos.height-(s+i));var r=Math.min(a.adjustedPosInfos.left,t);return new A((r+=Math.max(0,a.adjustedPosInfos.left+a.adjustedPosInfos.width-(r+n))).toFixed(2),s.toFixed(2))}function w(){var t=o.data("smartZoomData"),e=t.containerDiv,n=t.originalSize,i=e.parent().offset(),a=T(t.settings.left,i.left,e.parent().width()),s=T(t.settings.top,i.top,e.parent().height());e.offset({left:a,top:s}),e.width(x(t.settings.width,e.parent().width(),a-i.left)),e.height(x(t.settings.height,e.parent().height(),s-i.top));var u=S(e),c=Math.min(Math.min(u.width/n.width,u.height/n.height),1).toFixed(2),l=n.width*c,m=n.height*c;t.adjustedPosInfos={left:(u.width-l)/2+i.left,top:(u.height-m)/2+i.top,width:l,height:m,scale:c},g(),P(o,t.adjustedPosInfos.left,t.adjustedPosInfos.top,l,m,0,function(){o.css("visibility","visible")}),r()}function P(e,n,i,a,s,r,u){var c=o.data("smartZoomData"),l=c.containerDiv.offset(),m=n-l.left,d=i-l.top;if(null!=c.transitionObject){var h=c.originalSize,f=new Object;f[c.transitionObject.transform+"-origin"]="0 0",f[c.transitionObject.transition]="all "+r/1e3+"s ease-out",c.transitionObject.css3dSupported?f[c.transitionObject.transform]="translate3d("+m+"px, "+d+"px, 0) scale3d("+a/h.width+","+s/h.height+", 1)":f[c.transitionObject.transform]="translateX("+m+"px) translateY("+d+"px) scale("+a/h.width+","+s/h.height+")",null!=u&&(c.transitionObject.cssAnimHandler=u,e.one(t.support.transition.end,c.transitionObject.cssAnimHandler)),e.css(f)}else e.animate({"margin-left":m,"margin-top":d,width:a,height:s},{duration:r,easing:c.settings.easing,complete:function(){null!=u&&u()}})}function y(t){var e=o.data("smartZoomData"),n=o.width(),i=o.height(),a=o.offset(),s=parseInt(a.left),r=parseInt(a.top),u=e.containerDiv.offset();if(1!=t&&(s=parseInt(s)-u.left,r=parseInt(r)-u.top),null!=e.transitionObject){var c,l,m=o.css(e.transitionObject.transform);if(m&&""!=m&&-1!=m.search("matrix"))-1!=m.search("matrix3d")?c=(l=m.replace("matrix3d(","").replace(")","").split(","))[0]:(c=(l=m.replace("matrix(","").replace(")","").split(","))[3],s=parseFloat(l[4]),r=parseFloat(l[5]),t&&(s=parseFloat(s)+u.left,r=parseFloat(r)+u.top)),n*=c,i*=c}return{x:s,y:r,width:n,height:i}}function D(t,e,i){var a=o.data("smartZoomData"),s="";if(1==i&&a.currentActionType!=t?(s=a.currentActionType+"_"+n.END,a.currentActionType="",a.currentActionStep=""):a.currentActionType!=t||a.currentActionStep==n.END?(a.currentActionType=t,a.currentActionStep=n.START,s=a.currentActionType+"_"+a.currentActionStep):a.currentActionType==t&&e==n.END&&(a.currentActionStep=n.END,s=a.currentActionType+"_"+a.currentActionStep,a.currentActionType="",a.currentActionStep=""),""!=s){var r=jQuery.Event(s);r.targetRect=y(!0),r.scale=r.targetRect.width/a.originalSize.width,o.trigger(r)}}function Z(){for(var e,o=(document.body||document.documentElement).style,n=["transition","WebkitTransition","MozTransition","MsTransition","OTransition"],i=["transition","-webkit-transition","-moz-transition","-ms-transition","-o-transition"],a=["transform","-webkit-transform","-moz-transform","-ms-transform","-o-transform"],s=n.length,r=0;r<s;r++)if(null!=o[n[r]]){transformStr=a[r];var u=t('<div style="position:absolute;">Translate3d Test</div>');if(t("body").append(u),(e=new Object)[a[r]]="translate3d(20px,0,0)",u.css(e),css3dSupported=u.offset().left-t("body").offset().left==20,u.empty().remove(),css3dSupported)return{transition:i[r],transform:a[r],css3dSupported:css3dSupported}}return null}function x(t,e,o){return t.search&&-1!=t.search("%")?(e-o)*(parseInt(t)/100):parseInt(t)}function T(t,e,o){return t.search&&-1!=t.search("%")?e+o*(parseInt(t)/100):e+parseInt(t)}function E(){w()}function S(t){var e=t.offset();return e?{x:e.left,y:e.top,width:t.outerWidth(),height:t.outerHeight()}:null}function A(t,e){this.x=t,this.y=e,this.toString=function(){return"(x="+this.x+", y="+this.y+")"},this.interpolate=function(t,e){return new A(e*this.x+(1-e)*t.x,e*this.y+(1-e)*t.y)},this.distance=function(t){return Math.sqrt(Math.pow(t.y-this.y,2)+Math.pow(t.x-this.x,2))}}"object"!=typeof e&&e?t.error("Method "+e+" does not exist on e-smartzoom jquery plugin"):"img"!=o[0].tagName.toLowerCase()||o[0].complete?i.init.apply(o,[arguments[0]]):o.bind("load.smartZoom",{arguments:arguments[0]},function(t){o.unbind("load.smartZoom"),i.init.apply(o,[t.data.arguments])})}}(jQuery),function(t){t.extend(t.easing,{smartZoomEasing:function(e,o,n,i,a){return t.easing.smartZoomOutQuad(e,o,n,i,a)},smartZoomOutQuad:function(t,e,o,n,i){return-n*(e/=i)*(e-2)+o}})}(jQuery),function(t){function e(e){var o=e||window.event,n=[].slice.call(arguments,1),i=0,a=0,s=0;return(e=t.event.fix(o)).type="mousewheel",o.wheelDelta&&(i=o.wheelDelta/120),o.detail&&(i=-o.detail/3),s=i,void 0!==o.axis&&o.axis===o.HORIZONTAL_AXIS&&(s=0,a=-1*i),void 0!==o.wheelDeltaY&&(s=o.wheelDeltaY/120),void 0!==o.wheelDeltaX&&(a=-1*o.wheelDeltaX/120),n.unshift(e,i,a,s),(t.event.dispatch||t.event.handle).apply(this,n)}var o=["DOMMouseScroll","mousewheel"];if(t.event.fixHooks)for(var n=o.length;n;)t.event.fixHooks[o[--n]]=t.event.mouseHooks;t.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var t=o.length;t;)this.addEventListener(o[--t],e,!1);else this.onmousewheel=e},teardown:function(){if(this.removeEventListener)for(var t=o.length;t;)this.removeEventListener(o[--t],e,!1);else this.onmousewheel=null}},t.fn.extend({mousewheel:function(t){return t?this.bind("mousewheel",t):this.trigger("mousewheel")},unmousewheel:function(t){return this.unbind("mousewheel",t)}})}(jQuery),$.fn.emulateTransitionEnd=function(t){var e=!1,o=this;$(this).one($.support.transition.end,function(){e=!0});return setTimeout(function(){e||$(o).trigger($.support.transition.end)},t),this},$(function(){$.support.transition=transitionEnd()});